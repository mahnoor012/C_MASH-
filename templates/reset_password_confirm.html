<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Set New Password - CSE Hub</title>
<style>
 body {
   font-family: Arial, sans-serif;
   background-color: #0d1b2a;
   color: #fff;
   display: flex;
   justify-content: center;
   align-items: center;
   height: 100vh;
   margin: 0;
 }

 .container {
   background-color: #1b263b;
   padding: 40px;
   border-radius: 12px;
   width: 400px;
   box-shadow: 0 6px 15px rgba(0,0,0,0.3);
   text-align: center;
 }

 h2 {
   color: #ffcc00;
   margin-bottom: 25px;
 }

 form {
   display: flex;
   flex-direction: column;
   align-items: center;
 }

 form input {
   width: 90%;
   padding: 12px;
   margin: 10px 0;
   border: none;
   border-radius: 6px;
   box-sizing: border-box;
   text-align: center;
 }

 button {
   padding: 12px;
   width: 90%;
   border: none;
   border-radius: 6px;
   background: #ffcc00;
   color: #0d1b2a;
   font-weight: bold;
   cursor: pointer;
   transition: 0.3s;
   margin-top: 15px;
 }

 button:hover {
   background: #0096c7;
   color: #fff;
 }

 a {
   color: #ffcc00;
   text-decoration: none;
 }

 a:hover {
   text-decoration: underline;
   font-weight: bold;
 }

 .error-message {
   color: #ff4d6d;
   font-size: 14px;
   margin-top: 10px;
   text-align: center;
 }
</style>
</head>
<body>
<div class="container">
 <h2>Set Your New Password</h2>
 <form method="post" onsubmit="return validatePassword()">
   {% csrf_token %}

   <label for="id_new_password1">New Password</label>
   {{ form.new_password1 }}

   <label for="id_new_password2">Confirm Password</label>
   {{ form.new_password2 }}

   <button type="submit">Reset Password</button>

   <div id="error-box" class="error-message"></div>
 </form>
 <p><a href="{% url 'login' %}">Back to Login</a></p>
</div>

<script>
function validatePassword() {
 const pass1 = document.getElementById("id_new_password1").value;
 const pass2 = document.getElementById("id_new_password2").value;
 const errorBox = document.getElementById("error-box");
 errorBox.innerText = "";

 if (pass1.length < 8) {
   errorBox.innerText = "The password must contain at least 8 characters.";
   return false;
 }

 if (/^\d+$/.test(pass1)) {
   errorBox.innerText = "The password cannot be entirely numeric.";
   return false;
 }

 if (pass1 !== pass2) {
   errorBox.innerText = "Password mismatch! Please recheck.";
   return false;
 }

 return true;
}
</script>
</body>
</html>
